
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>RealReachability - 陈斌彬的技术博客</title>
  <meta name="author" content="陈斌彬">

  
  <meta name="description" content="RealReachability We need to observe the REAL reachability of network for iOS. That&rsquo;s what RealReachability do. Why RealReachability? As we &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://cnbin.github.io/blog/2016/03/15/realreachability/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="陈斌彬的技术博客" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//libs.baidu.com/jquery/1.7.2/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">陈斌彬的技术博客</a></h1>
  
    <h2>Stay foolish,stay hungry</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="cnbin.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation"> 
  <li><a href="/">首页</a></li> 
  <li><a href="/blog/archives">归档</a></li> 
  <li><a href="/about">关于</a></li> 
</ul>
</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">RealReachability</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-03-15T18:18:16+08:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>6:18 pm</span></time>
        
      </p>
    
  </header>


<div class="entry-content"><!--More-->


<h1>RealReachability</h1>

<p><a href="http://cocoadocs.org/docsets/RealReachability/1.1.2/"><img src="https://img.shields.io/badge/pod-1.1.2-yellow.svg" alt="Version" /></a>
<a href="http://cocoadocs.org/docsets/RealReachability/1.1.2/"><img src="https://img.shields.io/badge/License-MIT-blue.svg" alt="License" /></a>
<a href="http://cocoadocs.org/docsets/RealReachability/1.1.2/"><img src="https://img.shields.io/badge/Platform-iOS-orange.svg" alt="Platform" /></a>
<a href="http://cocoadocs.org/docsets/RealReachability/1.1.2/"><img src="https://img.shields.io/badge/Build-Passed-green.svg" alt="Platform" /></a></p>

<h4>We need to observe the REAL reachability of network for iOS. That&rsquo;s what RealReachability do.</h4>

<h1>Why RealReachability?</h1>

<p>As we know, we already have reachability framework for us to choose. Such as the famous repository <a href="https://github.com/tonymillion/Reachability">Reachability</a>.</p>

<p><strong>BUT we really need a tool for us to get the reachability, not the local connection!</strong></p>

<p><strong>Apple doc tells us something about SCNetworkReachability API:
&ldquo;Note that reachability does not guarantee that the data packet will actually be received by the host.&rdquo;</strong></p>

<p>The called &ldquo;reachability&rdquo; we already know can only tell us the local connection status.These tools currently we know are all supported by the SCNetworkReachability API.</p>

<p><strong>Now <a href="https://github.com/dustturtle/RealReachability">RealReachability</a> can do this for you~</strong></p>

<p>We introduce ping module for us to check the real network status, together with SCNetworkReachability API. And we use FSM(finite state machine) to control all of the network status to confirm that only status change will be sent to application.</p>

<p>Enjoy it!</p>

<h1>Quick Start With Cocoapods</h1>

<p><a href="http://cocoapods.org">CocoaPods</a> is a dependency manager for Objective-C, which automates and simplifies the process of using 3rd-party libraries like RealReachability in your projects. You can install it with the following command:</p>

<pre><code>$ gem install cocoapods
</code></pre>

<h4>Podfile</h4>

<p>To integrate RealReachability into your Xcode project using CocoaPods, specify it in your <code>Podfile</code>:</p>

<pre><code>source 'https://github.com/CocoaPods/Specs.git'
platform :ios, '6.0'

pod 'RealReachability', '~&gt; 1.1.2’
</code></pre>

<p>Then, run the following command:</p>

<pre><code>$ pod install
</code></pre>

<h1>Manual Start</h1>

<p>If you&rsquo;d rather do everything by hand, just add the folder &ldquo;RealReachability&rdquo; to your project, then all of the files will be added to your project.</p>

<h1>Dependencies</h1>

<ul>
<li>Xcode 5.0+ for ARC support, automatic synthesis and compatibility
libraries. iOS 6.0+.</li>
<li>The SystemConfiguration Framework should be added to your project.</li>
</ul>


<h1>Usage</h1>

<h4>Start to notify(we suggest you to start notify in didFinishLaunchingWithOptions):</h4>

<pre><code>- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    [GLobalRealReachability startNotifier];
    return YES;
}
</code></pre>

<h4>Add Observer(anywhere you like):</h4>

<pre><code>[[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(networkChanged:)
                                                 name:kRealReachabilityChangedNotification
                                               object:nil];
</code></pre>

<h4>Observer method like below:</h4>

<pre><code>- (void)networkChanged:(NSNotification *)notification
{
    RealReachability *reachability = (RealReachability *)notification.object;
    ReachabilityStatus status = [reachability currentReachabilityStatus];
    NSLog(@"currentStatus:%@",@(status));
}
</code></pre>

<h4>Trigger realtime Reachability like below:</h4>

<pre><code>[GLobalRealReachability reachabilityWithBlock:^(ReachabilityStatus status) {
    switch (status)
    {
        case RealStatusNotReachable:
        {
        //  case NotReachable handler
            break;
        }

        case RealStatusViaWiFi:
        {
        //  case WiFi handler
            break;
        }

        case RealStatusViaWWAN:
        {
        //  case WWAN handler
            break;
        }

        default:
            break;
    }
}];
</code></pre>

<h4>Query currentStatus</h4>

<pre><code>ReachabilityStatus status = [reachability currentReachabilityStatus];
</code></pre>

<p>Once the reachabilityWithBlock was called, the &ldquo;currentReachabilityStatus&rdquo; will be refreshed synchronously.</p>

<h4>Set your own host for Ping (optional)</h4>

<p>Please make sure the host you set here is available for pinging. Large, stable website suggested. <br/>
This step is optional. If you do not set this, our default host is: www.baidu.com. <br/>
You may set your own host any time you like. Codes just like below:</p>

<pre><code>GLobalRealReachability.hostForPing = @"www.baidu.com";
</code></pre>

<h4>Get current WWAN type (optional)</h4>

<pre><code>WWANAccessType accessType = [GLobalRealReachability currentWWANtype];
</code></pre>

<p>Current WWAN type might be used to improve your app&rsquo;s user experience(e.g, set different network request timeout interval for different WWAN type).</p>

<h1>Demo</h1>

<p>We already put the demo project in the <a href="https://github.com/dustturtle/RealReachability">repository</a>.</p>

<h1>License</h1>

<p>RealReachability is released under the MIT license. See LICENSE for details.</p>

<h2>And finally&hellip;</h2>

<p>Please use and improve! Patches accepted, or create an issue.</p>

<p>I&rsquo;d love it if you could send me a note as to which app you&rsquo;re using it with! Thank you!</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">陈斌彬</span></span>

      




<time class='entry-date' datetime='2016-03-15T18:18:16+08:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>6:18 pm</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/ios/'>ios</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2016/03/15/teamviewershi-yong-fang-fa/" title="Previous Post: Teamviewer使用方法">&laquo; Teamviewer使用方法</a>
      
      
        <a class="basic-alignment right" href="/blog/2016/03/16/objective-cde-shi-li-fang-fa-initfang-fa/" title="Next Post: Objective-C的实例方法init方法">Objective-C的实例方法init方法 &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section> 
  <h1>文章分类</h1> 
  <ul id="categories"> 
    <li class='category'><a href='/blog/categories/android/'>android (126)</a></li>
<li class='category'><a href='/blog/categories/computer/'>computer (158)</a></li>
<li class='category'><a href='/blog/categories/csharp/'>csharp (56)</a></li>
<li class='category'><a href='/blog/categories/energy/'>energy (17)</a></li>
<li class='category'><a href='/blog/categories/git/'>git (15)</a></li>
<li class='category'><a href='/blog/categories/github/'>github (2)</a></li>
<li class='category'><a href='/blog/categories/ionic/'>ionic (13)</a></li>
<li class='category'><a href='/blog/categories/ios/'>ios (733)</a></li>
<li class='category'><a href='/blog/categories/java/'>java (23)</a></li>
<li class='category'><a href='/blog/categories/js/'>js (143)</a></li>
<li class='category'><a href='/blog/categories/life/'>life (126)</a></li>
<li class='category'><a href='/blog/categories/linux/'>linux (63)</a></li>
<li class='category'><a href='/blog/categories/mac/'>mac (70)</a></li>
<li class='category'><a href='/blog/categories/net/'>net (417)</a></li>
<li class='category'><a href='/blog/categories/network/'>network (2)</a></li>
<li class='category'><a href='/blog/categories/objective-c/'>objective-c (78)</a></li>
<li class='category'><a href='/blog/categories/octopress/'>octopress (4)</a></li>
<li class='category'><a href='/blog/categories/php/'>php (24)</a></li>
<li class='category'><a href='/blog/categories/python/'>python (5)</a></li>
<li class='category'><a href='/blog/categories/react/'>react (5)</a></li>
<li class='category'><a href='/blog/categories/ruby/'>ruby (23)</a></li>
<li class='category'><a href='/blog/categories/sql/'>sql (8)</a></li>
<li class='category'><a href='/blog/categories/swift/'>swift (38)</a></li>
<li class='category'><a href='/blog/categories/video/'>video (1)</a></li>
<li class='category'><a href='/blog/categories/web/'>web (184)</a></li>
  
    </ul> 
</section><section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016/08/08/angularjsshi-yong-controllershi-xian-urltiao-zhuan/">AngularJS使用Controller实现URL跳转</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/08/08/macxia-ionicdiao-shi/">Mac下ionic调试</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/08/08/uiwebview-de-huan-cun-ce-lue-he-yan-zheng-,yi-ji-web-xiang-guan/">UIWebview 的缓存策略和验证，以及 Web 相关</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/08/08/graceful-fs-warning-when-running-grunt-task/">Graceful-fs Warning When Running Grunt Task</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/08/04/fkconsole-xcodekong-zhi-tai-zhong-wen-xian-shi-diao-zheng-cha-jian/">FKConsole - Xcode控制台中文显示调整插件</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - 陈斌彬 -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  











</body>
</html>
