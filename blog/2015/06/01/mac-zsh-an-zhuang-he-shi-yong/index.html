
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Mac-zsh 安装和使用(原创) - 陈斌彬的技术博客</title>
  <meta name="author" content="陈斌彬">

  
  <meta name="description" content="首先，我们知道，shell 有很多种：可以通过命令 cat /etc/shells 可以查看系统支持哪些 shell： Zsh全称为 Z Shell，因为 Z 是最后一个字母，因此大家称之为——终极 Shell。 Oh My Zsh安装 Linux/Unix 默认都是使用 Bash(Bourne &hellip;">
  <meta name="keywords" content="mac,shell">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://cnbin.github.io/blog/2015/06/01/mac-zsh-an-zhuang-he-shi-yong/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="陈斌彬的技术博客" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//libs.baidu.com/jquery/1.7.2/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">陈斌彬的技术博客</a></h1>
  
    <h2>Stay foolish,stay hungry</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="cnbin.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation"> 
  <li><a href="/">首页</a></li> 
  <li><a href="/blog/archives">归档</a></li> 
  <li><a href="/about">关于</a></li> 
</ul>
</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Mac-zsh 安装和使用(原创)</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-06-01T08:27:21+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>1</span><span class='date-suffix'>st</span>, <span class='date-year'>2015</span></span> <span class='time'>8:27 am</span></time>
        
      </p>
    
  </header>


<div class="entry-content"><!--More-->


<p>首先，我们知道，shell 有很多种：可以通过命令 <code>cat /etc/shells</code> 可以查看系统支持哪些 shell：</p>

<p><img src="http://ww3.sinaimg.cn/mw690/78f9859egw1esoacmcz07j20cc056t9j.jpg" alt="img" /></p>

<p><code>Zsh</code>全称为 <code>Z Shell</code>，因为 <code>Z</code> 是最后一个字母，因此大家称之为——<code>终极 Shell</code>。</p>

<h2>Oh My Zsh安装</h2>

<p><code>Linux/Unix</code> 默认都是使用 <code>Bash(Bourne-again Shell)</code>，使用 <code>zsh</code>，由于配置过于复杂，前期很少人使用，但后来有外国程序员弄出一个 <a href="http://ohmyz.sh/">Oh My ZSH</a> 来管理 <code>zsh</code> 的配置和支持更多插件，使得 <code>zsh</code> 变得更容易使用和更加强大。</p>

<h3>curl方式</h3>

<pre><code>curl -L https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh | sh
</code></pre>

<h3>wget方式</h3>

<pre><code>wget https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O - | sh
</code></pre>

<p>安装完之后，关闭当前终端，并重新打开一个，<code>oh my zsh</code>的默认主题是 <code>robbyrussel</code>。</p>

<p>如下图所示：</p>

<p><img src="http://ww3.sinaimg.cn/mw690/78f9859egw1esoag8umudj20fq0i70yn.jpg" alt="img" /></p>

<p>安装完成之后退出当前会话重新打开一个终端窗口，你就可以见到这个彩色的提示了：</p>

<p><img src="http://ww4.sinaimg.cn/mw690/78f9859egw1esoamn6qzrj20bu02z74o.jpg" alt="img" /></p>

<h2>配置</h2>

<p><code>oh my zsh</code>提供数十种主题，相关文件在 <code>~/.oh-my-zsh/themes</code> 目录，可以编辑主题来满足自身需求，我是使用默认的<code>robbyrussell</code>，但是做了一些修改：</p>

<pre><code>PROMPT='%{$fg_bold[red]%}➜ %{$fg_bold[green]%}%p%{$fg[cyan]%}%d %{$fg_bold[blue]%}$(git_prompt_info)%{$fg_bold[blue]%}% %{$reset_color%}&gt; '
#PROMPT='${ret_status}%{$fg_bold[green]%}%p %{$fg[cyan]%}%c %{$fg_bold[blue]%}$(git_prompt_info)%{$fg_bold[blue]%} % %{$reset_color%}&gt; '
</code></pre>

<p>与原来不同的是，将 <code>c</code>(表示当前目录)改为 <code>d</code>(表示绝对路径)，另外在尾部添加一个 <code>&gt;</code> 作为隔离符号，效果如下：</p>

<p><img src="http://ww4.sinaimg.cn/mw690/78f9859egw1esoc67lsdej20bc01xdg8.jpg" alt="img" /></p>

<h3>切換 theme</h3>

<p>所有的主題都放在 <code>~/.oh-my-zsh/themes</code> 目录中，先看一下有哪些可以用：</p>

<pre><code> ~/ [master*] ls ~/.oh-my-zsh/themes
3den.zsh-theme                junkfood.zsh-theme
Soliah.zsh-theme              kafeitu.zsh-theme
adben.zsh-theme               kardan.zsh-theme
af-magic.zsh-theme            kennethreitz.zsh-theme
afowler.zsh-theme             kiwi.zsh-theme
agnoster.zsh-theme            kolo.zsh-theme
alanpeabody.zsh-theme         kphoen.zsh-theme
amuse.zsh-theme               lambda.zsh-theme
apple.zsh-theme               linuxonly.zsh-theme
arrow.zsh-theme               lukerandall.zsh-theme
aussiegeek.zsh-theme          macovsky-ruby.zsh-theme
avit.zsh-theme                macovsky.zsh-theme
awesomepanda.zsh-theme        maran.zsh-theme
bira.zsh-theme                mgutz.zsh-theme
blinks.zsh-theme              mh.zsh-theme
bureau.zsh-theme              michelebologna.zsh-theme
candy-kingdom.zsh-theme       mikeh.zsh-theme
candy.zsh-theme               miloshadzic.zsh-theme
clean.zsh-theme               minimal.zsh-theme
cloud.zsh-theme               mira.zsh-theme
crcandy.zsh-theme             mortalscumbag.zsh-theme
crunch.zsh-theme              mrtazz.zsh-theme
cypher.zsh-theme              murilasso.zsh-theme
dallas.zsh-theme              muse.zsh-theme
darkblood.zsh-theme           nanotech.zsh-theme
daveverwer.zsh-theme          nebirhos.zsh-theme
dieter.zsh-theme              nicoulaj.zsh-theme
.
.
.
</code></pre>

<p>切换方式是修改 <code>.zshrc</code> 的 <code>ZSH_THEME</code> 这个参数，预设是 <code>robbyrussell</code>，如果想改成 <code>apple.zsh-theme</code>，那么请把 <code>ZSH_THEME</code> 改为 <code>apple</code>：</p>

<pre><code> # Set name of the theme to load.
 # Look in ~/.oh-my-zsh/themes/
 # Optionally, if you set this to "random", it'll load a random theme each
 # time that oh-my-zsh is loaded.
 ZSH_THEME="apple"
</code></pre>

<p>这里有一些 <a href="https://github.com/robbyrussell/oh-my-zsh/wiki/themes">theme</a> 的截图，如果不想一个一个來看效果，可以參考看看。</p>

<h2>zsh的改进方法</h2>

<ul>
<li><p>你可以打开 <code>auto_pushd</code> 选项(通过命令 <code>setopt auto_pushd</code> ），这样你通过 <code>cd</code> 切换目录时，<code>zsh</code> 会自动将前一个目录加到栈里，这样你就不会因为忘记 <code>pushd</code> 而遗憾了;</p></li>
<li><p><code>bash</code> 里面可以<code>cd -</code> 回到上一个目录（即最后一次调用 <code>cd</code> 时所在的目录），但 zsh 里面有 <code>cd -2</code>, <code>cd +3</code> 这样的用法，并且在输入 <code>cd -</code> 之后按 <code>TAB</code> 能够列出目录名供挑选补全。不过需要注意的是，这里 <code>-2</code> 并不表示倒数第二次调用 <code>cd</code> 时的目录，而是倒数第二次通过 <code>pushd</code> 记录的目录，如果打开了 <code>auto_pushd</code> 选项，那么这两个的含义倒是一样的;</p></li>
<li><p><code>zsh</code> 里面将 <code>~</code> 这个符号的用法进行了扩展，我们可以用 <code>hash -d www=/var/www/html</code> 定义一个路径别名，然后用 <code>cd ~www</code> 就可以进入到 <code>/var/www/html</code> 了。我在配置 XAMPP 的 mysql 中，就用到了 <code>hash -d myserver=/Applications/XAMPP/xamppfiles/bin/mysql.server</code> ,配置 XAMPP 启动路径为  <code>hash -d myxampp=/Applications/XAMPP/xamppfiles/xampp</code>。</p></li>
</ul>


<h3>插件</h3>

<p><code>oh my zsh</code> 提供丰富的插件，存放在 <code>~/.oh-my-zsh/plugins</code> 目录下：</p>

<p><img src="http://ww3.sinaimg.cn/mw690/78f9859egw1esocjn78sjj20dk0b8tbf.jpg" alt="img" /></p>

<p>想了解每个插件的功能以及如何使用，只要打开相关插件的目录下 <code>zsh</code> 文件即可，以 <code>git</code> 插件为例：</p>

<p><img src="http://ww2.sinaimg.cn/mw690/78f9859egw1esocfvzwddj20e600g74d.jpg" alt="img" /></p>

<p>显示如下：</p>

<p><img src="http://ww4.sinaimg.cn/mw690/78f9859egw1esocclo33vj20co0fy428.jpg" alt="img" /></p>

<p>打开 <code>git.plugin.zsh</code> 文件，里面有很多命名别来来简化命令的输入。您可以根据自己的需要来启用哪些插件，只需在 <code>~/.zshrc</code> 配置文件追加内容即可：</p>

<pre><code>plugins=(git autojump osx)
</code></pre>

<h3>常用插件的使用：</h3>

<h4>1.git：</h4>

<p>当您处在一个 <code>git</code> 受控的目录下时，<code>Shell</code> 明确显示 <code>git</code> 和 <code>branch</code> 信息，另外简化 <code>git</code> 很多命令，具体使用请参考：
<a href="https://github.com/robbyrussell/oh-my-zsh/wiki/Plugins">Plugin:git</a></p>

<h4>2.autojump</h4>

<p><code>autojump</code> 智能跳转，通过 <code>zsh</code> 记录访问过的目录，<code>autojump</code> 的简写 <code>j ＋ 目录名</code> ，随意的在目录间跳转，支持各种模糊匹配、补全，例如之前的 <code>cd work</code>；现在可以直接 <code>work</code>，或者 <code>j wor</code> 、 <code>j work</code> 达到同样的效果，节省大好的时间。</p>

<p>1.安装</p>

<p>如果你是 <code>Mac</code> 用户，跟我一样的话，可以使用 <code>brew</code> 安装即可：</p>

<pre><code>brew install autojump
</code></pre>

<p>如果是 <code>Linux</code> 用户，首先下载 <code>autojump</code> 最新版本，执行命令：</p>

<pre><code>git clone git://github.com/joelthelion/autojump.git
</code></pre>

<p>然后进入目录，执行</p>

<pre><code>./install.py
</code></pre>

<p>最后将以下代码加入 <code>~/.zshrc</code> 配置文件：</p>

<pre><code>[[ -s ~/.autojump/etc/profile.d/autojump.sh ]] &amp;&amp; . ~/.autojump/etc/profile.d/autojump.sh
</code></pre>

<p>注意：关于 <code>zsh: command not found: j</code> 报错</p>

<p>请在 <code>.zshrc</code> 文件相应的位置，找到 <code>plugins=()</code> 这行,添加 <code>autojump</code> 记得各插件名之间用英文空格隔开</p>

<p>如下图：</p>

<p><img src="http://ww1.sinaimg.cn/mw690/78f9859egw1esobl6083rj20ca018q32.jpg" alt="img" /></p>

<p>2.使用</p>

<p>我之前打开过我的博客 <code>~/octopress/source</code> 目录，现在只需敲入 <code>j o</code> 就可以快速切换到 <code>~/ocotpress</code> 目录。</p>

<p>如下图：</p>

<p><img src="http://ww4.sinaimg.cn/mw690/78f9859egw1esobl6tk4aj209k035mxr.jpg" alt="img" /></p>

<p>利用 <code>j –s</code> 可以看你的历史路径库。</p>

<p><img src="http://ww4.sinaimg.cn/mw690/78f9859egw1esodk61us9j20b006zgnc.jpg" alt="img" /></p>

<h4>3.osx</h4>

<ul>
<li><code>tab</code> - 在一个新标签打开当前目录</li>
<li><code>cdf</code> - cd 到当前 Finder 目录</li>
<li><code>quick-look</code> - 快速浏览特殊的文件</li>
<li><code>man-preview</code> - 在 Preview 应用打开特定的 man page</li>
<li><code>trash</code> - 将特定的文件移到垃圾桶</li>
</ul>


<p>使用：</p>

<p>1.各种补全：除了支持命令补全和文件补全之外，还支持命令参数补全，插件内容补全，只需要按 <code>tab</code> 键</p>

<p>2.目录浏览和跳转：输入 <code>d</code>，就显示在会话里访问的目录列表，输入列表前的序号，即可以跳转</p>

<p><img src="http://ww4.sinaimg.cn/mw690/78f9859egw1esocspb241j208104674v.jpg" alt="img" /></p>

<p>3.输入 <code>..</code> 可以返回到上级目录</p>

<p><img src="http://ww3.sinaimg.cn/mw690/78f9859egw1esod75d4k6j20al0240td.jpg" alt="img" /></p>

<h3>安装 zsh-comopletions</h3>

<p>安裝：</p>

<pre><code>$ brew install zsh-completions
</code></pre>

<p><img src="http://ww2.sinaimg.cn/mw690/78f9859egw1et8dtvkvk1j20fp0a9jur.jpg" alt="img" /></p>

<p>要启用还需要打开你的 <code>.zshrc</code> 加入以下两行来纳入 <code>zsh-completions</code> 的补全功能：</p>

<p>.zshrc</p>

<pre><code>+# zsh-completions
+fpath=(/usr/local/share/zsh-completions $fpath)
</code></pre>

<p>同时还需要 <code>rebuild zsh</code> 的 <code>.zcompdump</code></p>

<pre><code>$ rm -f ~/.zcompdump; compinit
</code></pre>

<h3>转换过程中可能遇到的一些问题</h3>

<h4>1.alias</h4>

<p>如果你本來就有設定一些 alias 在你的 <code>.bashrc</code>，你又把這些設定直接套用到 <code>.zshrc</code>，那有機會有一些指令會變怪怪的，這有可能是你設定的 alias 與 oh-my-zsh 內建的衝到了。oh-my-zsh 內建的 alias 放在 <code>~/.oh-my-zsh/lib/aliases.zsh</code>，內容如下：</p>

<p>aliases.zsh</p>

<pre><code># Push and pop directories on directory stack

alias pu='pushd'
alias po='popd'

# Basic directory operations

alias ...='cd ../..'
alias -- -='cd -'

# Super user

alias _='sudo'
alias please='sudo'

#alias g='grep -in'


# Show history

if [ "$HIST_STAMPS" = "mm/dd/yyyy" ]
then
    alias history='fc -fl 1'
elif [ "$HIST_STAMPS" = "dd.mm.yyyy" ]
then
    alias history='fc -El 1'
elif [ "$HIST_STAMPS" = "yyyy-mm-dd" ]
then
    alias history='fc -il 1'
else
    alias history='fc -l 1'
fi
# List direcory contents

alias lsa='ls -lah'
alias l='ls -la'
alias ll='ls -l'
alias la='ls -lA'
alias sl=ls # often screw this up


alias afind='ack-grep -il'
</code></pre>

<p>建议要在 <code>.zshrc</code> 加上自己的 alias 前先确认看看這個档案裡是不是有一些 alias 会跟你的冲突。</p>

<h4>2.bash-completion</h4>

<p>如果你跟我一样用 bash 时有装 bash-completion，而且又沒仔細弄清楚就把 <code>.bashrc</code> 的內容一般会套用在 <code>.zshrc</code> 上，那么当你开一个新的 shell 时有可能会发现遇到以下的信息：</p>

<pre><code>  .
  .
  .
/usr/local/etc/bash_completion:138: command not found: complete
/usr/local/etc/bash_completion:141: command not found: complete
/usr/local/etc/bash_completion:144: command not found: complete
/usr/local/etc/bash_completion:147: command not found: complete
/usr/local/etc/bash_completion:150: command not found: complete
/usr/local/etc/bash_completion:153: command not found: complete
/usr/local/etc/bash_completion:156: command not found: complete
/usr/local/etc/bash_completion:159: command not found: complete
/usr/local/etc/bash_completion:162: command not found: complete
/usr/local/etc/bash_completion:246: parse error near `]]'
</code></pre>

<p>这是因为在安裝 bash-completion 的时候，原則上都会加入以下內容在你的 <code>.bashrc</code>：</p>

<p>.bashrc</p>

<pre><code>if [ -f $(brew --prefix)/etc/bash_completion ]; then
    . $(brew --prefix)/etc/bash_completion
fi
</code></pre>

<p>以上指令会去 <code>source bash_completion</code> 的內容，而 bash_completion 里面使用了 <a href="http://www.gnu.org/software/bash/manual/html_node/Programmable-Completion-Builtins.html">bash completion buitins</a> 中的 <code>complete</code> 這個指令，所以如果你的 <code>.zshrc</code> 也去 <code>source bash_completion</code>，那就会 show 出像上面的 <code>command not found: complete</code> 这种信息了。所以记得在 <code>.zshrc</code> 中不要加入这段 code。</p>

<h3>Resource Reference</h3>

<ul>
<li><a href="http://icarus4.logdown.com/">http://icarus4.logdown.com/</a></li>
<li><a href="http://www.cnblogs.com/bamanzi/p/zsh-simple-guide.html">http://www.cnblogs.com/bamanzi/p/zsh-simple-guide.html</a></li>
</ul>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">陈斌彬</span></span>

      




<time class='entry-date' datetime='2015-06-01T08:27:21+08:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>1</span><span class='date-suffix'>st</span>, <span class='date-year'>2015</span></span> <span class='time'>8:27 am</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/mac/'>mac</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2015/06/01/mac-invisiblix-rang-yin-cang-wen-jian-wu-chu-ke-cang/" title="Previous Post: Mac-Invisiblix 让隐藏文件无处可藏">&laquo; Mac-Invisiblix 让隐藏文件无处可藏</a>
      
      
        <a class="basic-alignment right" href="/blog/2015/06/01/mac-shell-shi-yong/" title="Next Post: Mac-shell 使用(原创)">Mac-shell 使用(原创) &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section> 
  <h1>文章分类</h1> 
  <ul id="categories"> 
    <li class='category'><a href='/blog/categories/android/'>android (126)</a></li>
<li class='category'><a href='/blog/categories/computer/'>computer (158)</a></li>
<li class='category'><a href='/blog/categories/csharp/'>csharp (56)</a></li>
<li class='category'><a href='/blog/categories/energy/'>energy (17)</a></li>
<li class='category'><a href='/blog/categories/git/'>git (15)</a></li>
<li class='category'><a href='/blog/categories/github/'>github (2)</a></li>
<li class='category'><a href='/blog/categories/ionic/'>ionic (16)</a></li>
<li class='category'><a href='/blog/categories/ios/'>ios (735)</a></li>
<li class='category'><a href='/blog/categories/java/'>java (23)</a></li>
<li class='category'><a href='/blog/categories/js/'>js (143)</a></li>
<li class='category'><a href='/blog/categories/life/'>life (126)</a></li>
<li class='category'><a href='/blog/categories/linux/'>linux (63)</a></li>
<li class='category'><a href='/blog/categories/mac/'>mac (71)</a></li>
<li class='category'><a href='/blog/categories/net/'>net (417)</a></li>
<li class='category'><a href='/blog/categories/network/'>network (2)</a></li>
<li class='category'><a href='/blog/categories/objective-c/'>objective-c (78)</a></li>
<li class='category'><a href='/blog/categories/octopress/'>octopress (4)</a></li>
<li class='category'><a href='/blog/categories/php/'>php (24)</a></li>
<li class='category'><a href='/blog/categories/python/'>python (5)</a></li>
<li class='category'><a href='/blog/categories/react/'>react (5)</a></li>
<li class='category'><a href='/blog/categories/ruby/'>ruby (23)</a></li>
<li class='category'><a href='/blog/categories/sql/'>sql (8)</a></li>
<li class='category'><a href='/blog/categories/swift/'>swift (40)</a></li>
<li class='category'><a href='/blog/categories/video/'>video (1)</a></li>
<li class='category'><a href='/blog/categories/web/'>web (185)</a></li>
  
    </ul> 
</section><section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016/08/11/iosyu-webjiao-hu/">Ios与web交互</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/08/11/ionishang-chuan-www/">Ionic上传 Www</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/08/10/ru-he-wei-swiftjin-xing-hong-ding-yi/">如何为Swift进行宏定义</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/08/10/oc-diao-yong-swift/">Oc 调用 Swift（原创）</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/08/09/ocyu-swiftxiang-hu-diao-yong/">OC与swift相互调用</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - 陈斌彬 -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  











</body>
</html>
